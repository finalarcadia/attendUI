<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="student-class">
    <template>
        <style include="shared-styles">
            :host {
                --my-color: var(--accent-color);
                --present-color: var(--paper-green-a700);
                --late-color: var(--paper-amber-500);
                --absent-color: var(--paper-red-700);
            }

            paper-card {
                width: 100%;
                --paper-card-content: {
                    font-size: 26px;
                    font-weight: 500;
                    color: white;
                    background: var(--my-color);
                }
            }

            paper-icon-button {
                vertical-align: bottom;
            }

            paper-input {
				--paper-input-container-focus-color: var(--my-color);
                display: inline-block;
                width: 90px;
            }

            paper-button {
                display: inline-block;
                color: var(--my-color);
            }

			paper-fab {
                float: right;
                display: inline-block;
                --paper-fab-background: var(--my-color);
            }

            paper-progress {
                width: 100%;
                display: inline-block;
                vertical-align: top;
            }

            #present {
                --paper-progress-active-color: var(--present-color);
            }

            #presentText {
                width: 100%;
                display: inline-block;
                vertical-align: bottom;
                @apply(--paper-font-caption);
                color: var(--present-color);
            }

            #late {
                --paper-progress-active-color: var(--late-color);
            }

            #lateText {
                width: 100%;
                display: inline-block;
                vertical-align: bottom;
                @apply(--paper-font-caption);
                color: var(--late-color);
            }

            #absent {
                --paper-progress-active-color: var(--absent-color);
            }

            #absentText {
                width: 100%;
                display: inline-block;
                vertical-align: bottom;
                @apply(--paper-font-caption);
                color: var(--absent-color);
            }

        </style>

        <paper-card>
            <!-- header -->
            <div class="card-content">
                <iron-icon icon="maps:local-library"></iron-icon>
                {{className}}
                <iron-icon icon="device:access-time" style="float:right;"></iron-icon>
                <iron-icon icon="device:gps-fixed" hidden$="{{!locationReq}}" style="float:right;"></iron-icon>
                <iron-icon icon="editor:border-color" hidden$="{{!codeReq}}" style="float:right;"></iron-icon>
            </div>

            <!-- middle -->
            <div class="card-actions">

	                <paper-input label="Enter code" hidden$="{{!codeReq}}" no-label-float></paper-input>
					<paper-button><iron-icon icon="image:edit"></iron-icon>Record</paper-button>

				<paper-icon-button icon="hardware:keyboard-arrow-up" title="more info" onclick="_toggle()"
				style="float: right;"></paper-icon-button>
                <script>
                    function _toggle() {
                        var moreInfo = event.currentTarget.parentElement.querySelector('iron-collapse');
                        var iconButton = Polymer.dom(event).localTarget;
                        iconButton.icon = moreInfo.opened ? 'hardware:keyboard-arrow-up'
                        : 'hardware:keyboard-arrow-down';
                        moreInfo.toggle();
                    }
                </script>

                <iron-collapse id="dropdown" style="width:100%;">
                    <span id="presentText">
                        Present <span style="float:right;">90%</span>
                        <br>
                    </span>
                    <paper-progress id="present" value="90"></paper-progress>
                    <br>
                    <span id="lateText">
                        Late <span style="float:right;">20%</span>
                        <br>
                    </span>
                    <paper-progress id="late" value="20"></paper-progress>
                    <br>
                    <span id="absentText">
                        Absent <span style="float:right;">10%</span>
                        <br>
                    </span>
                    <paper-progress id="absent" value="10"></paper-progress>
                    <br>
					<paper-fab mini icon="close"></paper-fab>
					<br><br>
                </iron-collapse>
            </div>
        </paper-card>

    </template>

    <script>

        Polymer({
            is: 'student-class',

            properties: {

                elementColor: {
                    type: String,
                    value: 'var(--accent-color)',
                },

                className: {
                    type: String,
                    value: 'noClassNameGiven',
                },

                locationReq: {
                    type: Boolean,
                    value: false
                },

                codeReq: {
                    type: Boolean,
                    value: false,
                },

                numTotal: {
                    type: Number,
                    value: 1,
                },

                numPresent: {
                    type: Number,
                    value: 1,
                },

                numLate: {
                    type: Number,
                    value: 1,
                },

                numAbsent: {
                    type: Number,
                    value: 1,
                }

            },

            ready: function() {
                this.customStyle['--my-color'] = this.elementColor;
                this.updateStyles();
            }
        });
    </script>
</dom-module>
